
Скрипты командной строки
========================


.. contents::
   :local:


ml-initdb.py
------------

Инициализирует базу данных и импортирует список жанров. Этот скрипт не
очень-то нужен, так как следующий скрипт делает всё указанное.


ml-import.py
------------

Использование::

    ml-import.py [file.inpx ...]

Инициализирует базу данных, импортирует список жанров и список файлов
INPX, перечисленных в командной строке. При повторных запусках не
переинициализирует БД и не переимпортирует жанры; так же не
переимпортирует уже проимпортированные книги, но импортирует в БД новые.


ml-search.py
------------

Использование::

    ml-search.py [-i] [-I] [-t] [-s] [-f] ...

Программа выполняет поиск по базе данных и показывает список
результатов. В настоящее время может искать только в списке авторов.

Глобальные опции::

    -i, --ignore-case     независимо от регистра (по умолчанию: угадать)
    -I, --case-sensitive  с учётом регистра
    -t, --start           тип поиска: подстрока в начале строки
                          (это тип поиска по умолчанию)
    -s, --substring       тип поиска: подстрока в любом месте
    -f, --full            тип поиска: полное совпадение всей строки

Опции ``-i/-I`` не могут использованы одновременно, поскольку означают
противоположные команды. В случае, если ни одна из них не использована,
программа угадывает зависимость от регистра: если все параметры даны в
нижнем регистре, программы выполнит поиск без учёта регистра. Если среди
параметров есть параметры в ВЕРХНЕМ или Смешанном регистре - поиск будет
с учётом регистра.

Опции ``-t/-s/-f`` определяют тип поиска. Возможные значения:

* start - поиск подстроки в начале поля; поиск "друг" найдёт "друг" и
  "другой", но не "подруга"; это тип по умолчанию;
* substring - поиск подстроки в любом месте; поиск "друг" найдёт "друг",
  "другой" и "подруга".
* full - поиск на точное совпадение всей строки; поиск "друг" найдёт
  только "друг", но не "другой";


Поиск авторов
^^^^^^^^^^^^^

Использование::

    ml-search.py [-i/-I] [-t/-s/-f] author [-s surname] [-n name] [-m misc-name] [fullname]

Искать и печатать список авторов по фамилии, имени, доп. имени (обычно
отчеству) или полному имени.

Опции::

    -s, --surname фамилия       Искать по фамилии
    -n, --name имя              Искать по имени
    -m, --misc-name доп. имени  Искать по доп. имени

Пример::

    ml-search.py -i author -s друг

Искать и печатать список авторов, чья фамилия начинается на "друг", без
учёта регистра.

Если использовать несколько опций, поиск будет сужен оператором "И".
Пример::

    ml-search.py -i author -s друг -n в

Искать и печатать список авторов, чья фамилия начинается на "друг" и имя
начинается на "в", без учёта регистра.


Поиск книг
^^^^^^^^^^

Использование::

    ml-search.py [-i/-I] [-t/-s/-f] books [-t title] [-s series] [-a archive] [-f file] [-d]

Искать и печатать список книг по заголовку, серии, архиву, имени файла.

Опции::

    -t, --title заголовок  Искать по заголовку
    -s, --series серия     Искать по серии
    -a, --archive архив    Искать по имени архива (zip-файла)
    -f, --file файл        Искать по имени файла (без расширения)
    -d, --details          Выводить больше информации о найденных книгах;
                           повторите эту опцию несколько раз, чтобы
                           получить ещё больше деталей

По умолчанию программы выводит список заголовков найденных книг. При
использовании опции `-d` также выводится список авторов и жанров, а
также серия, к которой принадлежит книга (если принадлежит) и порядковый
номер книги в этой серии. С двумя опциями `-d` (`-d -d` или просто
`-dd`) программа выводит дату файла и язык. С тремя `-d` выводятся имя
архива, имя файла, расширение и размер файла, и признак, была ли книга
помечена как удалённая.


Поиск расширений
^^^^^^^^^^^^^^^^

Использование::

    ml-search.py [-i/-I] [-t/-s/-f] ext [name]

Искать и печатать список расширений имён файлов по имени.


Поиск жанров
^^^^^^^^^^^^

Использование::

    ml-search.py [-i/-I] [-t/-s/-f] genres [-n name] [-t title]

Искать и печатать список жанров по имени и заголовку.

Опции::

    -n, --name имя         Искать по названию
    -t, --title заголовок  Искать по заголовку


Поиск языков
^^^^^^^^^^^^

Использование::

    ml-search.py [-i/-I] [-t/-s/-f] lang [name]

Искать и печатать список языков по имени.

.. vim: set tw=72 :
