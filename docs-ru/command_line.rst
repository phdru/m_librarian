
Скрипты командной строки
========================


.. contents::
   :local:


ml-initdb.py
------------

Инициализирует базу данных и импортирует список жанров. Этот скрипт не
очень-то нужен, так как следующий скрипт делает всё указанное.


ml-import.py
------------

Использование::

    ml-import.py [file.inpx ...]

Инициализирует базу данных, импортирует список жанров и список файлов
INPX, перечисленных в командной строке. При повторных запусках не
переинициализирует БД и не переимпортирует жанры; так же не
переимпортирует уже проимпортированные книги, но импортирует в БД новые.


ml-search.py
------------

Использование::

    ml-search.py [-i] [-I] [-t {exact,start,substring}] ...

Программа выполняет поиск по базе данных и показывает список
результатов. В настоящее время может искать только в списке авторов.

Глобальные опции::

    -i, --ignore-case     независимо от регистра (по умолчанию: угадать)
    -I, --case-sensitive  с учётом регистра
    -t, --search-type {exact,start,substring}
        тип поиска: точный, подстрока в начале (это тип по умолчанию),
        подстрока в любом месте.

Опции ``-i/-I`` не могут использованы одновременно, поскольку означают
противоположные команды. В случае, если ни одна из них не использована,
программа угадывает зависимость от регистра: если все параметры даны в
нижнем регистре, программы выполнит поиск без учёта регистра. Если среди
параметров есть параметры в ВЕРХНЕМ или Смешанном регистре - поиск будет
с учётом регистра.

Опция ``-t/--search-type`` определяет тип поиска. Возможные значения:

* exact - поиск на точное совпадение; поиск "друг" найдёт только "друг",
  но не "другой";
* start - поиск подстроки в начале поля; поиск "друг" найдёт "друг" и
  "другой", но не "подруга"; это тип по умолчанию;
* substring - поиск подстроки в любом месте; поиск "друг" найдёт "друг",
  "другой" и "подруга".


Поиск авторов
^^^^^^^^^^^^^

Использование::

    ml-search.py [-i] [-I] [-t ...] author [-s surname] [-n name] [-m misc-name] [fullname]

Искать и печатать список авторов по фамилии, имени, доп. имени (обычно
отчеству) или полному имени.

Опции::

    -s, --surname фамилия       Искать по фамилии
    -n, --name имя              Искать по имени
    -m, --misc-name доп. имени  Искать по доп. имени

Пример::

    ml-search.py -i author -s друг

Искать и печатать список авторов, чья фамилия начинается на "друг", без
учёта регистра.

Если использовать несколько опций, поиск будет сужен оператором "И".
Пример::

    ml-search.py -i author -s друг -n в

Искать и печатать список авторов, чья фамилия начинается на "друг" и имя
начинается на "в", без учёта регистра.

Поиск книг
^^^^^^^^^^

Использование::

    ml-search.py [-i] [-I] [-t ...] books [-t title] [-s series] [-a archive] [-f file]

Искать и печатать список книг по заголовку, серии, архиву, имени файла.

Опции::

    -t, --title заголовок  Искать по заголовку
    -s, --series серия     Искать по серии
    -a, --archive архив    Искать по имени архива (zip-файла)
    -f, --file файл        Искать по имени файла (без расширения)

Поиск расширений
^^^^^^^^^^^^^^^^

Использование::

    ml-search.py [-i] [-I] [-t ...] ext [name]

Искать и печатать список расширений имён файлов по имени.

Поиск жанров
^^^^^^^^^^^^

Использование::

    ml-search.py [-i] [-I] [-t ...] genres [-n name] [-t title]

Искать и печатать список жанров по имени и заголовку.

Опции::

    -n, --name имя         Искать по названию
    -t, --title заголовок  Искать по заголовку

Поиск языков
^^^^^^^^^^^^

Использование::

    ml-search.py [-i] [-I] [-t ...] lang [name]

Искать и печатать список языков по имени.

.. vim: set tw=72 :
